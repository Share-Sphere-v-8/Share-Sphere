<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;

        }
        h1 {
            color: #333;
            text-align: center;
        }
        #search-section {
            margin-bottom: 20px;
        }
        #search-input {
            width: 300px;
            padding: 10px;
            font-size: 16px;
        }
        #search-button {
            padding: 10px 15px;
            font-size: 16px;
            cursor: pointer;
        }
        #results-section {
            margin-top: 20px;
        }
        #results-container {
            background-color: #fff;
            padding: 15px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        #player
        {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #navbar {
            width: 100%;
            background-color: #001f3f;
            position: sticky;
            top: 0;
            left: 0;
            margin-bottom: 2px;
            z-index: 1000;
        }

        #nav-container {
            margin: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        #name {
            display: flex;
            align-items: center;
        }

        #name span {
            font-size: 1.5rem;
            font-weight: bold;
            color: #edf6f9;
        }

        #desktop-nav {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 3.5rem;
            font-size: 0.8rem;
        }

        #desktop-nav a {
            color: #edf6f9;
            font-weight: 500;
            transition: color 0.5s ease;
            font-size: medium;
            text-decoration: none;
            font-size: 1.1rem;
        }

        #desktop-nav a:hover {
            color: #aff0e3;
        }

        #auth-buttons {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.5rem 1rem;
            border-radius: 20%;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        #logout {
            background: #00b4d8;
            border: 2px solid #00b4d8;
            color: #edf6f9;
            font-size: 1rem;
            border-radius: 5px;
        }

        #logout:hover {
            background: #ff0000;
            color: #ffffff;
        }
        @media (min-width: 851px) {
            #auth-buttons {
                flex-direction: row;
                gap: 1rem;
            }
            #desktop-nav
            {
                display: flex;
                flex-direction: row;
                gap: 3.5rem;
            }
            #more{
                display: none ;
                border: 2px solid #edf6f9;
                padding: 4px;
                margin: 2px;
            }
        }
        @media (max-width: 850px) {
            #desktop-nav {
                display: none;
            }
            #more {
                display: block;
            }
            #nav-container{
                flex-direction: column;
            }
            #auth-buttons{
                flex-direction: column;
                gap: 0.2rem;
            }
        }
    </style>
</head>
<body>
    <nav id="navbar">
        <div id="nav-container">
            <div id="name">
                <span>Share Sphere</span>
            </div>
            <button id = "more">&#9776;</button>
            <div id="desktop-nav">
                <a href = "sharesphere_public_page.html">Home</a>
                <a href="sharesphere_your_account.html">Your Account</a>
                <a href="sharesphere_find_people.html">Find friends</a>
                <a href ="sharesphere_find_rooms.html">Join Room</a>
                <a href="sharesphere_about_us.html">About Us</a>
                <a href="sharesphere_feedback.html">Feedback</a>
            </div>

            <div id="auth-buttons">
                <button id="logout">Log Out</button>
            </div>
        </div>
    </nav>
    <h1>Song Search Page</h1>
    <main>
        <div id = "search-section">
            <input type="text" id="search-input" placeholder="Search for songs...">
            <button id="search-button">Search</button>
        </div>
            <div id="player"></div>
    </main>
    <script>
        document.getElementById('search-button').addEventListener('click', function() {
            searchSong();
        });
    </script>
    <script>
    async function searchSong() {
      let query = document.getElementById("search-input").value;
      if (!query) return alert("Please enter a song name");

      let url = `https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&videoCategoryId=10&q=${encodeURIComponent(query)}&key=AIzaSyDjZng4T299cUjZGK2IIVRDloOZcNYO6HQ`;

      try {
        let response = await fetch(url);
        let data = await response.json();

        if (data.items.length > 0) {
          let videoId = data.items[0].id.videoId;
          document.getElementById("player").innerHTML =
            `<iframe 
              src="https://www.youtube.com/embed/${videoId}?autoplay=1"
              frameborder="0" allow="autoplay; encrypted-media" allowfullscreen ></iframe>`;
        } else {
          alert("No video found");
        }
      } catch (err) {
        console.error(err);
        alert("Error fetching YouTube data");
      }
    }
    </script>
    <script type = "module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";
        import { getAuth, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDjZng4T299cUjZGK2IIVRDloOZcNYO6HQ",
            authDomain: "share-sphere-6f3b1.firebaseapp.com",
            projectId: "share-sphere-6f3b1",
            storageBucket: "share-sphere-6f3b1.appspot.com",
            messagingSenderId: "109994622137",
            appId: "1:109994622137:web:3a3f5f5e2f5e8e2e8e2e8e",
            measurementId: "G-MEASUREID"
        };

        const auth = getAuth();

        more.addEventListener("click", moreclicked);
        function moreclicked()
        {
            let dnav = document.getElementById("desktop-nav");
            dnav.style.display = "flex";
            dnav.style.flexDirection = "column";
            dnav.style.gap = "0"
            more.style.display = "none";
        }

        let logoutbtn = document.getElementById("logout");
        logoutbtn.addEventListener("click", fnclogout);

        function fnclogout()
        {
            signOut(auth)
            .then(() => {
                window.location.href = "sharesphere_logout.html"
            }).catch((error) => {
                alert("Error occured while signing out, please try again later.")
            });
        }
        onAuthStateChanged(auth, (user) => {
            if (!user) {
                window.location.href = "index.html";
            }
            if(user)
            {
            if(!user.emailVerified)
            {
                window.location.href = "sharesphere_emial_verify.html";
            }
        }
        });
    </script>
</body>
</html>